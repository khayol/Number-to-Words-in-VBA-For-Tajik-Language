@page "/IndOrg/Contact/Delete/{CurrentID}"
@inject ContactController objContactController

<WrAuth PageName="ContactDelete"><MainContent>  
<EditForm Model="@objContact" OnValidSubmit="@DeleteRow" OnInvalidSubmit="@Cancel" Context="formContext" >  
   
    <WrPnlElm>
     <ControlQuickAccess>
             <WrOper Category="EditForm" TypeInput="button" Txt="Cancel"  OnClickCallback="@Cancel"/>
             <WrOper Category="EditForm" TypeInput="submit" Txt="Delete"/>
     </ControlQuickAccess>
    </WrPnlElm>

    <WrFormBody>
        <FormElements>
            <WrQuestOrMsg Txt="AreYouSureToDeteteRow"/>
              
             <WrFieldInt TransEntity="Individual" FieldCaption="Code" 
              ReadonlyOpt="true" Val="@objContact.Code" />

            <WrFieldStr ReadonlyThis="true" FieldCaption="Name"
            TransEntity="Individual"  @bind-BindingValue ="@objContact.Name"/> 

      </FormElements>      
    </WrFormBody>    
    </EditForm>    
</MainContent></WrAuth>

@code{
   [Parameter]
   public string CurrentID {get;set;}
    Contact objContact= new Contact();

    protected override void OnInitialized()
    {
      objContact = objContactController.GetContactById(Convert.ToInt32(CurrentID));       
    }
    
    protected void DeleteRow(){

        objContactController.DeleteContact(objContact);
        NavManager.NavigateTo("/IndOrg/Contact/ViewStd/"+AppData.Individual_IdSelect);
    }
    void Cancel(){
        NavManager.NavigateTo("/IndOrg/Contact/ViewStd/"+AppData.Individual_IdSelect);
    }
}