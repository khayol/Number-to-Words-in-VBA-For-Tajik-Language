@page "/IndOrg/Individual/Delete/{CurrentId}"
@inject IndividualController MainController

<WrAuth PageName="IndividualDelete"><MainContent>  
<EditForm Model="@_objMain" OnValidSubmit="@DeleteRow" OnInvalidSubmit="@Cancel" Context="formContext">  
   
    <WrPnlElm>
        <ControlQuickAccess>
             <WrOper Category="EditForm" TypeInput="button" Txt="Cancel"  OnClickCallback="Cancel"/>
             <WrOper Category="EditForm" TypeInput="submit" Txt="Delete"/>
        </ControlQuickAccess>
    </WrPnlElm>

    <WrFormBody>
        <FormElements>
            <WrQuestOrMsg Txt="AreYouSureToDeteteRow" Color="Black" BackgroundColor="yellow" />
           
            <WrFieldInt TransEntity="Individual" FieldCaption="Code" 
            Readonly="true" Val="@_objMain.Code" />

            <WrFieldStr Readonly="true" FieldCaption="FirstName"
            TransEntity="Individual"  @bind-BindingValue ="@_objMain.FirstName"/> 

            <WrFieldStr Readonly="true" FieldCaption="SecondName"
            TransEntity="Individual"  @bind-BindingValue ="@_objMain.SecondName"/>

            <WrFieldStr Readonly="true
            " FieldCaption="LastName"
            TransEntity="Individual"  @bind-BindingValue ="@_objMain.LastName"/>

        </FormElements>      
    </WrFormBody>    
    </EditForm>    
</MainContent></WrAuth>


@code{

    [Parameter] public string CurrentId { get; set; }
    Individual _objMain = new Individual();  

    protected override void OnInitialized()
    {
        _objMain = MainController.GetById_FirstOrDefault(Convert.ToInt32(CurrentId));
    }

    private void DeleteRow()
    {
        MainController.Delete(_objMain);
        NavManager.NavigateTo("/IndOrg/Individual/ViewStd/"+CurrentId);
    }
    void Cancel()
    {
        NavManager.NavigateTo("/IndOrg/Individual/ViewStd/"+CurrentId);
    }

}