@page "/IndOrg/ContactViewStd/{IndividualId}"
@inject ContactController MainController

@if (ContactList == null)
{
   <WrLoading/>
}
else
{
   <AuthorizeView Roles="@admSer.GetRolesList("ContactViewStd")" Context="authContext">
   <Authorized>
    <WrDataGrid @ref="grid"
                  DataItems="ContactList"
                  Columns="@MainController.columns"
                  SelectedRow="SelectedRowMeth"
                  UniqIdOfRecord="Id"
                  ColumnsToExcludeCSV="Id,IndividualId"
                  PageNameTitle="@trs.GetTranslation("ContactViewStd",@AppData.ActiveUser,"Individual")">

           <ControlQuickAccess>
               <WrSpace Length=2/>
               <WrOper Category="RunCmd" Design="btn"  OnClickCallback="() => NavManager.NavigateTo(AppData.BaseUrlUri)"  Txt="Back" />
               <WrOper Design="btn" Type="C" Ico="fa fa-plus"   Link="/IndOrg/ContactAdd"     TxtToolTip="Add" />
               <WrOper Design="btn" Type="R" Ico="fa fa-file"   Link="/IndOrg/ContactEdit/"   LinkId=@AppData.Contact_IdSelect TxtToolTip="View" />
               <WrOper Design="btn" Type="U" Ico="fa fa-pencil" Link="/IndOrg/ContactEdit/"   LinkId=@AppData.Contact_IdSelect TxtToolTip="Edit" />
               <WrOper Design="btn" Type="D" Ico="fa fa-trash"  Link="/IndOrg/ContactDelete/" LinkId=@AppData.Contact_IdSelect TxtToolTip="Delete" />
            </ControlQuickAccess> 

    </WrDataGrid>
    </Authorized>
 <NotAuthorized>
   <WrPageNotFound/>
 </NotAuthorized>
 </AuthorizeView>
}

@code  {  

 #region     Declare
 
    private WrDataGrid<Contact> grid;
    private List<Contact> ContactList;
    
    [Parameter]
    public string IndividualId { get; set; }
 
 #endregion  Declare

 #region    BlazorMethods

    protected override void OnInitialized()
    {
        MainController.Initialized();
        AppData.ActivePageName="View-Contact"; 
        ContactList = MainController.GetContactByIndividualId(int.Parse(IndividualId)).ToList();
    }

#endregion BlazorMethods

#region    Event
    private void SelectedRowMeth(string pSelectedRow)
    {
     AppData.Contact_IdSelect = pSelectedRow;
    }
 #endregion Event
 
    }
