@page "/Dir/CountryDelete/{CurrentID}"
@inject CountryController MainController

<AuthorizeView Roles="@admSer.GetRolesList("CountryDelete")" Context="authContext">
  <Authorized>

<EditForm Model="@objMain" OnValidSubmit="@Delete" OnInvalidSubmit="@Cancel" Context="formContext">  
   
    <WrPnlElm>
        <ControlQuickAccess>
             <WrOper Category="EditForm" TypeInput="submit" Txt="Delete"/>
             <WrOper Category="EditForm" TypeInput="button" Txt="Cancel"  OnClickCallback="Cancel"/>
        </ControlQuickAccess>
    </WrPnlElm>

    <WrFormBody>
        <FormElements>
            <WrQuestOrMsg Txt="AreYouSureToDeteteRow"/>
           
            <WrFieldInt TransEntity="General" FieldTxt="Code" 
            ReadonlyOpt="readonlyMain1" Val="@objMain.Code" />

            <WrFieldStr ReadonlyThis="readonlyMain1" FieldTxt="Alpha3"
            TransEntity="General"  @bind-BindingValue ="@objMain.Alpha3"/> 

            <WrFieldStr ReadonlyThis="readonlyMain1" FieldTxt="Name"
            TransEntity="General"  @bind-BindingValue ="@objMain.Name"/>

            <WrFieldStr ReadonlyThis="readonlyMain1" FieldTxt="FullName"
            TransEntity="General"  @bind-BindingValue ="@objMain.FullName"/>

        </FormElements>      
    </WrFormBody>    
    </EditForm>    
</Authorized>
<NotAuthorized>
    <WrPageNotFound/>
</NotAuthorized>
</AuthorizeView>


@code{

    [Parameter]
    public string CurrentID { get; set; }
    Country objMain = new Country();  
    private bool readonlyMain1 {get;set;}=false;

    protected override void OnInitialized()
    {
          readonlyMain1=AppData.readonlyMain1;
        objMain = MainController.GetById_FirstOrDefault(Convert.ToInt32(CurrentID));
    }

    protected void Delete()
    {
        MainController.Delete(objMain);
        NavManager.NavigateTo("/Dir/CountryViewStd/0");
    }
    void Cancel()
    {
        NavManager.NavigateTo("/Dir/CountryViewStd/0");
    }

}